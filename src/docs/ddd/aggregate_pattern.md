# 애그리거트 패턴 

- 도메인 모델링을 하다보면 객체간의 관계를 참조로 표현하게 되는데,
  - 참조로 정의할 경우, 일대다 관계의 객체를 쉽게 사용할 수 있다는 장점이 있다.
  - 그렇지만, 업무가 복잡해지면서 참조로 인한 다단계 계층 구조가 생기고 점점 참조 관계가 복잡해지고 무거워짐 
  - 또한 복잡한 도메인 모델은 모델 내부의 경계가 불명확
- 즉, 도메인 모델이 커짐에 따라 이러한 문제가 복잡해지고 꼬일 수 있다. 

**이를 개선할 방안으로 최상위에 존재하는 엔티티 (루트 엔티티)를 중심으로 개념의 집합을 분리한 것이 애그리거트 패턴** 

## 규칙 
- 애그리거트 루트만 참조한다.
- 애그리거트 내 상세 클래스를 바로 참조하지 않고 루트를 통해 참조해야한다. 수정할때도 마찬가지이다.
- 애그리거트 간의 참조는 객체를 직접 참조하는 대신, **기본키를 사용**
- 기본키를 사용하면 느슨하게 연관되고 수정이 필요하지 않은 애그리거트를 함께 수정하는 실수를 방지한다. 
- **하나의 트랜잭션으로 하나의 애그리거트만 생성 및 수정**한다.

