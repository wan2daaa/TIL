# 클러스터 

- 여러 컴퓨터(노드)들이 하나의 시스템처럼 동작하도록 구성된 환경
- 클러스터는 애플리케이션을 실행하고 관리하기 위한 자원을 제공하며, 
  - 이러한 자원들은 Kubernetes에 의해 통제되고 조정됨

## 클러스터의 구성 요소

1. **마스터 노드 (Master Node)**:
    - **역할**: **클러스터를 관리하고 제어하는 역할**
    - **구성 요소**:
        - **API 서버 (API Server)**: 클러스터와의 모든 상호작용을 관리
        - **컨트롤러 매니저 (Controller Manager)**: 클러스터 상태를 관리하고 원하는 상태로 유지
        - **스케줄러 (Scheduler)**: 새로 생성된 파드를 적절한 작업 노드에 할당
        - **etcd**: 클러스터 상태 정보를 저장하는 분산 키-값 저장소
2. **작업 노드 (Worker Node)**:
    - **역할**: 애플리케이션 컨테이너(Pods)를 실제로 실행하는 역할을 합니다.
    - **구성 요소**:
        - **Kubelet**: 각 노드에서 실행되며, API 서버와 통신하여 컨테이너의 생명주기를 관리
        - **컨테이너 런타임**: 컨테이너를 실제로 실행 (예: Docker, containerd).
        - **Kube-proxy**: 네트워크 프록시로, 네트워크 통신을 관리하고 서비스 간의 트래픽을 적절히 분배

## 클러스터의 동작 방식
- 클러스터는 여러 대의 컴퓨터가 하나의 시스템처럼 동작하게 함으로써 
  - -> 높은 가용성과 확장성을 제공합니다. 
  
클러스터 내부에서 Kubernetes는 다음과 같은 작업을 수행

- **파드 (Pod)**: 클러스터 내에서 실행되는 가장 작은 배포 단위로, 하나 이상의 컨테이너로 구성됩니다.
- **서비스 (Service)**: 파드에 대한 네트워크 접근을 추상화하여 안정적인 네트워크 엔드포인트를 제공합니다.
- **디플로이먼트 (Deployment)**: 애플리케이션의 선언적 업데이트를 관리합니다.

### 예시로 이해하기

예를 들어, 웹 애플리케이션을 Kubernetes 클러스터에 배포한다고 가정해봅시다:

1. **애플리케이션 배포**: 웹 서버와 데이터베이스 서버가 각각 파드로 실행됩니다.
2. **클러스터 내 통신**: 웹 서버는 ClusterIP 서비스를 통해 데이터베이스 서버와 통신합니다.
3. **외부 접근**: 외부 사용자들은 NodePort 또는 LoadBalancer 서비스를 통해 웹 서버에 접근할 수 있습니다.

### 요약

- **클러스터**: 여러 대의 컴퓨터(노드)가 모여 하나의 시스템처럼 동작하는 환경.
- **마스터 노드**: 클러스터를 관리하고 제어하는 역할.
- **작업 노드**: 애플리케이션을 실행하는 역할.
- **파드**: 컨테이너가 실행되는 단위.
- **서비스**: 파드에 대한 네트워크 접근을 관리.

Kubernetes 클러스터는 이러한 구성 요소들이 협력하여 애플리케이션을 안정적이고 효율적으로 실행하고 관리하는 시스템입니다.