# 자바 프로그램의 개발과 구동 


## JVM  (Java Virtual Machine)
- JVM 은 말그대로 가상 기계다 

- 현실 세계에서 컴퓨터를 구동하려면 -> 물리적인 컴퓨터인 하드웨어와 운영체제, 그리고 그 위에서 구동될 소프트웨어가 필요하다 
- 자바의 가상 세계는 이러한 현실세계를 그대로 모방하고 있다 

- 자바 개발 도구인 JDK 를 이용해 개발된 프고그램은 
- JRE에 의해 가상의 컴픁인 JVM 상에서 구동


- 다만 배포되는 JDK, JRE, JVM 은 편의를 위해
- JDK가 JRE 를 포함하고, 
- JRE는 JVM을 포함하는 형태로 배포됨


---
- JDK는 자바 소스 컴파일러인 javac.exe 를 포함하고 있고, 
- JRE는 자바 프로그램 실행기인 java.exe 를 포함 하고 있다 

---
**프로그램이 메모리를 실행하는 방식**

- 보통 프로그램은 코드 실행 영역과, 데이터 저장영역 크게 두개로 나뉘어 져서 메모리를 실행한다

---
- 객체지향 프로그램에서는 데이터 저장 영역을 다시 세개의 영역으로 분할해서 사용
  - 스태틱 영역 :클래스 들의 놀이터
  - 스택 영역 : 메서드들의 놀이터
  - 힙 영역   : 객체들의 놀이터
- a.k.a. T 메모리라고 부르자

---
다시보는 main() 메서드 : 메서드 스택 프레임 

- main 메서드가 실행될 때 메모리, 특히 T 메모리에는 어떤일이 일어날까 


1. JRE는 먼저 프로그램안에 main() 메서드가 있는지 확인 -> main() 메서드의 존재가 확인 되면 
2. JRE는 프로그램 실행을위한 사전준비에 착수
3. JVM 은 목적 파일을 받아 그 목적 파일을 실행 (= JVM 이 제일 먼저 하는 일은 전처리 라고 하는 과정)
4. JVM은 가장 먼저 java.lang 패키지를 T 메모리의 스태틱 영역에 가져다 놓음
5. 다음으로 JVM은 개발자가 작성한 모든 클래스와 임포트 패키지 역시 스태틱 영역에 가져다 놓음

전처리 끝
---
6. main() 메서드가 작동되기 위해 스택 프레임이 스택 영역에 할당됨 
- 조금더 정확히 얘기하면 여는 중괄호를 만날 때마다 스택 프레임이 하나씩 생김 
    - (클래스 정의를 시작하는 여는 중괄호 제외!)
7. 메서드의 인자 args를 저장할 변수 공간을 스택 프레임의 맨 밑에 확보
   - 즉, 메서드 인자(들)의 변수 공간 할당
8. 이 과정을 거치고 나서야 main() 메서드 안의 첫 명령문을 실행함
9. 모든 명령어를 처리하고, 닫는 중괄홍롸 만나면, 스택 프레임이 소멸함 
---
JRE 는 눈에 보이지 않게 JVM 이라는 자바 가상 기계를 부팅하고, 

JVM 은 메모리 구조를 만들고 거기에 java.lang 패키지 로딩, 각종 클래스 로딩, main() 메서드 스택 프레임 배치, 변수 공간 배치 등의 일을 진행함 



