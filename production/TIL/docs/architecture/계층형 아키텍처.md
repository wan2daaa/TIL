# Layered Architecture

- 각 계층은 서비스 내에서의 특정 역할과 관심사, 책임(표시, 비즈니스 로직, DB 작업)을 갖는다
  - 프레젠테이션 계층은 UI 및 통신 로직을 처리하는 역할을 담당하고,
  - 비즈니스 계층은 요청과 관련된 특정 비즈니스 규칙을 실행하는 역할을 담당
- 아키텍처의 각 계층은 특정 비즈니스 요구를 충족시키기 위해 수행해야 하는 작업을 중심으로 추상화를 형성

- 계층형 아키텍처의 가장 강력한 특징은 구성 요소 간의 **관심사 분리**이다.
- 특정 계층 내의 구성요소는 해당 계층과 관련된 논리만을 다룬다

- 잘 만들어진 계층형 아키텍처는 **선택의 폭을 넓히고, 변화하는 요구사항과 외부 요인에 빠르게 적응할 수 있게** 해준다.
- 그리고 로버트 C 마틴에 의하면 이것이 바로 **아키텍처의 전부다.** (클린 아키텍처)

### 문제점
- 코드에 나쁜 습관들이 스며들기 쉽게 만들고, 시간이 지날수록 소프트웨어를 점점 더 변경하기 어렵게 만드는 수많은 허점들을 노출한다.

#### 데이터베이스 주도 설계를 유도한다. 
- 웹 계층은 도메인 계층에 의존하고, 도메인 계층은 영속성 계층에 의존하기 때문에 자연스레 데이터베이스에 의존하게 된다. 
- 모든 것이 영속성 계층을 토대로 만들어진다. 이런 방식은 다양한 이유로 문제를 초래할 수 있다.

우리가 만드는 대부분의 서비스의 목적이 무엇인지 생각해보자 
- 보통 비즈니스를 관장하는 규칙이나 정책을 반영한 모델을 만들어서 사용자가 이러한 규칙과 정책을 더욱 편리하게 활용할 수 있게 한다.
- 이때 우리는 상태가 아니라 행동을 중심으로 모델링 한다.

- 우리가 보통 만들어온 서비스의 유스케이스는 보통 영속성 계층을 먼저 구현했을 것이다
- 아마 DB의 구조를 먼저 생각하고, 이를 토대로 도메인 로직을 구현했을 것
- 전통적인 계층형 아키텍처에는 합리적이지만, 의존성 방향에 따라 자연스럽게 구현했지만, **비즈니스 관점에서는 전혀 맞지 않는 방법이다**